sites:
  - servername: www.europython.eu
    template: europython.conf.j2
    # This redirects to the main site
    redirected: https://ep2018.europython.eu
    server_names:
      - www.europython.eu
      - europython.eu
      - eu.pycon.org
      - euro.pycon.org
    root: /var/www/html

  - servername: localhost
    template: localhost.conf.j2
    root: /var/www/html

  - servername: secure.europython.eu
    template: secure.europython.eu.conf.j2
    server_names:
      - secure.europython.eu
      - mail.europython.eu
      - cloud1.europython.io
      - mail.europython.io
      - europython.io
    root: /var/www/html
    locations:
      - name: /.well-known/acme-challenge/
        alias: /home/letsencrypt/acme-challenge/

  - servername: wiki.europython.eu
    template: europython.conf.j2
    server_http: False
    proxy_pass: http://wiki
    HSTS_support: True

  - servername: ep2018.europython.eu
    template: europython.conf.j2
    proxy_pass: http://ep2018
    client_max_body_size: 50M
    HSTS_support: True
    short_links:
      - from: ^/media/conference/sponsor/brochure/ep2018_sponsor_brochure.pdf
        to:   /media/TBD/europython2017-sponsor-brochure-compressed.pdf
      - from: ^/ep2018_sponsor_brochure.pdf
        to: /media/TBD/europython2017-sponsor-brochure-compressed.pdf
      - from: ^/volunteer-app
        to:   https://signup.zone/EDyBYYK7QSi7zMLK7
      - from: ^/mobile-app
        to:   https://attendify.com/app/u77swu/
    locations:
      - name: /static
        alias: /usr/src/ep2018/data/static
      - name: /media
        alias: /usr/src/ep2018/data/media_public
      - name: /media_public
        alias: /usr/src/ep2018/data/media_public
      - name: /media_private
        alias: /usr/src/ep2018/data/media_private
      - name: /ep-ticket-search-app
        alias: /usr/src/ep2018/ep-ticket-search-app
        auth:
          basic: EuroPython 2018 Ticket Search App
          basic_user_file: /etc/nginx/.htpasswd
    
    
  - servername: ep2017.europython.eu
    template: europython.conf.j2
    proxy_pass: http://ep2017
    client_max_body_size: 50M
    HSTS_support: True
    short_links:
      - from: ^/media/conference/sponsor/brochure/ep2017_sponsor_brochure.pdf
        to:   /media/filer_public/db/f0/dbf03a1f-5ebf-4dfb-b555-595e86a6fa7d/europython2017-sponsor-brochure-compressed.pdf
      - from: ^/ep2017_sponsor_brochure.pdf
        to:   /media/filer_public/db/f0/dbf03a1f-5ebf-4dfb-b555-595e86a6fa7d/europython2017-sponsor-brochure-compressed.pdf
      - from: ^/volunteer-app
        to:   https://signup.zone/WmCunmZz7Nw4X9oLt/
      - from: ^/mobile-app
        to:   https://attendify.com/app/yh3g1w/
    locations:
      - name: /static
        alias: /usr/src/ep2017/data/static
      - name: /media
        alias: /usr/src/ep2017/data/media_public
      - name: /media_public
        alias: /usr/src/ep2017/data/media_public
      - name: /media_private
        alias: /usr/src/ep2017/data/media_private
      - name: /ep-ticket-search-app
        alias: /usr/src/ep2017/ep-ticket-search-app
        auth:
          basic: EuroPython 2017 Ticket Search App
          basic_user_file: /etc/nginx/.htpasswd
      - name: /ep-social-ticket-search-app
        alias: /usr/src/ep2017/ep-social-ticket-search-app
        auth:
          basic: EuroPython 2017 Social Ticket Search App
          basic_user_file: /etc/nginx/.htpasswd
    disable_accounts: True
    
  - servername: ep2016.europython.eu
    template: europython.conf.j2
    proxy_pass: http://ep2016
    client_max_body_size: 50M
    HSTS_support: True
    short_links:
      - from: ^/ep2016_sponsor_brochure.pdf
        to:   /media/conference/sponsor/brochure/ep2016_sponsor_brochure.pdf last
    locations:
      - name: /static
        alias: /usr/src/ep2016/data/static
      - name: /media
        alias: /usr/src/ep2016/data/media_public
      - name: /media_public
        alias: /usr/src/ep2016/data/media_public
      - name: /media_private
        alias: /usr/src/ep2016/data/media_private
 
    disable_accounts: True
    
  - servername: ep2015.europython.eu
    template: europython.conf.j2
    proxy_pass: http://ep2015
    client_max_body_size: 50M
    HSTS_support: True
    short_links:
      - from: ^/ep2015_sponsor_brochure.pdf
        to:   /media/conference/sponsor/brochure/ep2015_sponsor_brochure.pdf last
    locations:
      - name: /static
        alias: /usr/src/ep2015/data/static
      - name: /media
        alias: /usr/src/ep2015/data/media_public
      - name: /media_public
        alias: /usr/src/ep2015/data/media_public
      - name: /media_private
        alias: /usr/src/ep2015/data/media_private
      - name: /.well-known
        alias: /usr/src/ep2015/data/.well-known
    disable_accounts: True
    
  - servername: epstage.europython.eu
    template: europython.conf.j2
    proxy_pass: http://epstage
    client_max_body_size: 50M
    HSTS_support: True
    locations:
      - name: /static
        alias: /usr/src/epstage/data/static
      - name: /media
        alias: /usr/src/epstage/data/media_public
      - name: /media_public
        alias: /usr/src/epstage/data/media_public
      - name: /media_private
        alias: /usr/src/epstage/data/media_private
      - name: /ep-ticket-search-app
        alias: /usr/src/epstage/ep-ticket-search-app
        auth:
          basic: EuroPython Stage Ticket Search App
          basic_user_file: /etc/nginx/.htpasswd
      - name: /ep-social-ticket-search-app
        alias: /usr/src/epstage/ep-social-ticket-search-app
        auth:
          basic: EuroPython Stage Social Ticket Search App
          basic_user_file: /etc/nginx/.htpasswd
    
  - servername: dev.europython.eu
    template: europython.conf.j2
    HSTS_support: True
    redirected: https://ep2018.europython.eu
    short_links:
      - from: ^/\.well-known/acme-challenge/(.*)$
        to:   http://secure.europython.eu/.well-known/acme-challenge/$1 redirect
    
